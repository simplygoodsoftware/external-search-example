import json
import random
import uuid

from itertools import islice
from flask import Flask
from flask import request

app = Flask(__name__)

surnames = ['Иванов', 'Смирнов', 'Кузнецов', 'Попов', 'Васильев', 'Петров', 'Соколов', 'Михайлов', 'Новиков', 'Федоров', 'Морозов', 'Волков', 'Алексеев', 'Лебедев', 'Семенов', 'Егоров', 'Павлов', 'Козлов', 'Степанов', 'Николаев', 'Орлов', 'Андреев', 'Макаров', 'Никитин', 'Захаров', 'Зайцев', 'Соловьев', 'Борисов', 'Яковлев', 'Григорьев', 'Романов', 'Воробьев', 'Сергеев', 'Кузьмин', 'Фролов', 'Александров', 'Дмитриев', 'Королев', 'Гусев', 'Киселев', 'Ильин', 'Максимов', 'Поляков', 'Сорокин', 'Виноградов', 'Ковалев', 'Белов', 'Медведев', 'Антонов', 'Тарасов', 'Жуков', 'Баранов', 'Филиппов', 'Комаров', 'Давыдов', 'Беляев', 'Герасимов', 'Богданов', 'Осипов', 'Сидоров', 'Матвеев', 'Титов', 'Марков', 'Миронов', 'Крылов', 'Куликов', 'Карпов', 'Власов', 'Мельников', 'Денисов', 'Гаврилов', 'Тихонов', 'Казаков', 'Афанасьев', 'Данилов', 'Савельев', 'Тимофеев', 'Фомин', 'Чернов', 'Абрамов', 'Мартынов', 'Ефимов', 'Федотов', 'Щербаков', 'Назаров', 'Калинин', 'Исаев', 'Чернышев', 'Быков', 'Маслов', 'Родионов', 'Коновалов', 'Лазарев', 'Воронин', 'Климов', 'Филатов', 'Пономарев', 'Голубев', 'Кудрявцев', 'Прохоров', 'Наумов', 'Потапов', 'Журавлев', 'Овчинников', 'Трофимов', 'Леонов', 'Соболев', 'Ермаков', 'Колесников', 'Гончаров', 'Емельянов', 'Никифоров', 'Грачев', 'Котов', 'Гришин', 'Ефремов', 'Архипов', 'Громов', 'Кириллов', 'Малышев', 'Панов', 'Моисеев', 'Румянцев', 'Акимов', 'Кондратьев', 'Бирюков', 'Горбунов', 'Анисимов', 'Еремин', 'Тихомиров', 'Галкин', 'Лукьянов', 'Михеев', 'Скворцов', 'Юдин', 'Белоусов', 'Нестеров', 'Симонов', 'Прокофьев', 'Харитонов', 'Князев', 'Цветков', 'Левин', 'Митрофанов', 'Воронов', 'Аксенов', 'Софронов', 'Мальцев', 'Логинов', 'Горшков', 'Савин', 'Краснов', 'Майоров', 'Демидов', 'Елисеев', 'Рыбаков', 'Сафонов', 'Плотников', 'Демин', 'Хохлов', 'Фадеев', 'Молчанов', 'Игнатов', 'Литвинов', 'Ершов', 'Ушаков', 'Дементьев', 'Рябов', 'Мухин', 'Калашников', 'Леонтьев', 'Лобанов', 'Кузин', 'Корнеев', 'Евдокимов', 'Бородин', 'Платонов', 'Некрасов', 'Балашов', 'Бобров', 'Жданов', 'Блинов', 'Игнатьев', 'Коротков', 'Муравьев', 'Крюков', 'Беляков', 'Богомолов', 'Дроздов', 'Лавров', 'Зуев', 'Петухов', 'Ларин', 'Никулин', 'Серов', 'Терентьев', 'Зотов', 'Устинов', 'Фокин', 'Самойлов', 'Константинов', 'Сахаров', 'Шишкин', 'Самсонов', 'Черкасов', 'Чистяков', 'Носов', 'Спиридонов', 'Карасев', 'Авдеев', 'Воронцов', 'Зверев', 'Владимиров', 'Селезнев', 'Нечаев', 'Кудряшов', 'Седов', 'Фирсов', 'Андрианов', 'Панин', 'Головин', 'Терехов', 'Ульянов', 'Шестаков', 'Агеев', 'Никонов', 'Селиванов', 'Баженов', 'Гордеев', 'Кожевников', 'Пахомов', 'Зимин', 'Костин', 'Широков', 'Филимонов', 'Ларионов', 'Овсянников', 'Сазонов', 'Суворов', 'Нефедов', 'Корнилов', 'Любимов', 'Львов', 'Горбачев', 'Копылов', 'Лукин', 'Токарев', 'Кулешов', 'Шилов', 'Большаков', 'Панкратов', 'Родин', 'Шаповалов', 'Покровский', 'Бочаров', 'Никольский', 'Маркин', 'Горелов', 'Агафонов', 'Березин', 'Ермолаев', 'Зубков', 'Куприянов', 'Трифонов', 'Масленников', 'Круглов', 'Третьяков', 'Колосов', 'Рожков', 'Артамонов', 'Шмелев', 'Лаптев', 'Лапшин', 'Федосеев', 'Зиновьев', 'Зорин', 'Уткин', 'Столяров', 'Зубов', 'Ткачев', 'Дорофеев', 'Антипов', 'Завьялов', 'Свиридов', 'Золотарев', 'Кулаков', 'Мещеряков', 'Макеев', 'Дьяконов', 'Гуляев', 'Петровский', 'Бондарев', 'Поздняков', 'Панфилов', 'Кочетков', 'Суханов', 'Рыжов', 'Старостин', 'Калмыков', 'Колесов', 'Золотов', 'Кравцов', 'Субботин', 'Шубин', 'Щукин', 'Лосев', 'Винокуров', 'Лапин', 'Парфенов', 'Исаков', 'Голованов', 'Коровин', 'Розанов', 'Артемов', 'Козырев', 'Русаков', 'Алешин', 'Крючков', 'Булгаков', 'Кошелев', 'Сычев', 'Синицын', 'Черных', 'Рогов', 'Кононов', 'Лаврентьев', 'Евсеев', 'Пименов', 'Пантелеев', 'Горячев', 'Аникин', 'Лопатин', 'Рудаков', 'Одинцов', 'Серебряков', 'Панков', 'Дегтярев', 'Орехов', 'Царев', 'Шувалов', 'Кондрашов', 'Горюнов', 'Дубровин', 'Голиков', 'Курочкин', 'Латышев', 'Севастьянов', 'Вавилов', 'Ерофеев', 'Сальников', 'Клюев', 'Носков', 'Озеров', 'Кольцов', 'Комиссаров', 'Меркулов', 'Киреев', 'Хомяков', 'Булатов', 'Ананьев', 'Буров', 'Шапошников', 'Дружинин', 'Островский', 'Шевелев', 'Долгов', 'Суслов', 'Шевцов', 'Пастухов', 'Рубцов', 'Бычков', 'Глебов', 'Ильинский', 'Успенский', 'Дьяков', 'Кочетов', 'Вишневский', 'Высоцкий', 'Глухов', 'Дубов', 'Бессонов', 'Ситников', 'Астафьев', 'Мешков', 'Шаров', 'Яшин', 'Козловский', 'Туманов', 'Басов', 'Корчагин', 'Болдырев', 'Олейников', 'Чумаков', 'Фомичев', 'Губанов', 'Дубинин', 'Шульгин', 'Касаткин', 'Пирогов', 'Семин', 'Трошин', 'Горохов', 'Стариков', 'Щеглов', 'Фетисов', 'Колпаков', 'Чесноков', 'Зыков', 'Верещагин', 'Минаев', 'Руднев', 'Троицкий', 'Окулов', 'Ширяев', 'Малинин', 'Черепанов', 'Измайлов', 'Алехин', 'Зеленин', 'Касьянов', 'Пугачев', 'Павловский', 'Чижов', 'Кондратов', 'Воронков', 'Капустин', 'Сотников', 'Демьянов', 'Косарев', 'Беликов', 'Сухарев', 'Белкин', 'Беспалов', 'Кулагин', 'Савицкий', 'Жаров', 'Хромов', 'Еремеев', 'Карташов', 'Астахов', 'Русанов', 'Сухов', 'Вешняков', 'Волошин', 'Козин', 'Худяков', 'Жилин', 'Малахов', 'Сизов', 'Ежов', 'Толкачев', 'Анохин', 'Вдовин', 'Бабушкин', 'Усов', 'Лыков', 'Горлов', 'Коршунов', 'Маркелов', 'Постников', 'Черный', 'Дорохов', 'Свешников', 'Гущин', 'Калугин', 'Блохин', 'Сурков', 'Кочергин', 'Греков', 'Казанцев', 'Швецов', 'Ермилов', 'Парамонов', 'Агапов', 'Минин', 'Корнев', 'Черняев', 'Гуров', 'Ермолов', 'Сомов', 'Добрынин', 'Барсуков', 'Глушков', 'Чеботарев', 'Москвин', 'Уваров', 'Безруков', 'Муратов', 'Раков', 'Снегирев', 'Гладков', 'Злобин', 'Моргунов', 'Поликарпов', 'Рябинин', 'Судаков', 'Кукушкин', 'Калачев', 'Грибов', 'Елизаров']
firstnames = ['Абрам', 'Аваз', 'Аввакум', 'Август', 'Авдей', 'Авраам', 'Автандил', 'Агап', 'Агафон', 'Аггей', 'Адам', 'Адис', 'Адольф', 'Адриан', 'Азамат', 'Азарий', 'Азат', 'Айдар', 'Айнур', 'Айрат', 'Акакий', 'Аким', 'Алан', 'Александр', 'Алексей', 'Али', 'Алихан', 'Алмаз', 'Альберт', 'Альфред', 'Амадей', 'Амадеус', 'Амаяк', 'Амин', 'Амвросий', 'Анатолий', 'Анвар', 'Ангел', 'Андрей', 'Андрэ', 'Аникита', 'Антон', 'Ануфрий', 'Анфим', 'Аполлинарий', 'Арам', 'Аристарх', 'Аркадий', 'Арман', 'Армен', 'Арно', 'Арнольд', 'Арон', 'Арсен', 'Арсений', 'Арслан', 'Артем', 'Артемий', 'Артур', 'Архип', 'Аскольд', 'Афанасий', 'Ахмет', 'Ашот', 'Бахрам', 'Бежен', 'Бенедикт', 'Берек', 'Бернар', 'Богдан', 'Боголюб', 'Бонифаций', 'Бореслав', 'Борис', 'Борислав', 'Боян', 'Бронислав', 'Бруно', 'Булат', 'Вадим', 'Валентин', 'Валерий', 'Вальдемар', 'Вальтер', 'Вардан', 'Варлаам', 'Варфоломей', 'Василий', 'Ватслав', 'Велизар', 'Велор', 'Венедикт', 'Вениамин', 'Викентий', 'Виктор', 'Вилен', 'Вилли', 'Вильгельм', 'Виссарион', 'Виталий', 'Витаутас', 'Витольд', 'Владимир', 'Владислав', 'Владлен', 'Влас', 'Володар', 'Всеволод', 'Вячеслав', 'Гавриил', 'Галактион', 'Гамлет', 'Гарри', 'Гаяс', 'Гевор', 'Геворг', 'Геннадий', 'Генри', 'Генрих', 'Георгий', 'Геральд', 'Герасим', 'Герман', 'Глеб', 'Гоар', 'Гордей', 'Гордон', 'Горислав', 'Градимир', 'Григорий', 'Гурий', 'Густав', 'Давид', 'Давлат', 'Дамир', 'Даниил', 'Данислав', 'Даньяр', 'Демид', 'Демьян', 'Денис', 'Джамал', 'Джеймс', 'Джереми', 'Джозеф', 'Джордан', 'Джорж', 'Дик', 'Динар', 'Динасий', 'Дмитрий', 'Добрыня', 'Дональд', 'Донат', 'Донатос', 'Дорофей', 'Евгений', 'Евграф', 'Евдоким', 'Евсей', 'Евстафий', 'Егор', 'Елизар', 'Елисей', 'Емельян', 'Еремей', 'Ермолай', 'Ерофей', 'Ефим', 'Ефрем', 'Жан', 'Ждан', 'Жерар', 'Закир', 'Замир', 'Заур', 'Захар', 'Зенон', 'Зигмунд', 'Зиновий', 'Зураб', 'Ибрагим', 'Иван', 'Игнат', 'Игнатий', 'Игорь', 'Иероним', 'Измаил', 'Израиль', 'Илиан', 'Илларион', 'Ильхам', 'Ильшат', 'Илья', 'Ильяс', 'Инокентий', 'Иоанн', 'Иоаким', 'Ион', 'Иосиф', 'Ипполит', 'Ираклий', 'Иса', 'Исаак', 'Исидор', 'Искандер', 'Ислам', 'Исмаил', 'Казбек', 'Казимир', 'Камиль', 'Карен', 'Карим', 'Карл', 'Ким', 'Кир', 'Кирилл', 'Клавдий', 'Клаус', 'Клим', 'Климент', 'Клод', 'Кондрат', 'Константин', 'Корней', 'Корнилий', 'Кузьма', 'Лавр', 'Лаврентий', 'Лазарь', 'Лев', 'Леван', 'Левон', 'Ленар', 'Леон', 'Леонард', 'Леонид', 'Леонтий', 'Леопольд', 'Лука', 'Лукьян', 'Любим', 'Любомир', 'Людвиг', 'Люсьен', 'Люций', 'Мавлюда', 'Мадлен', 'Май', 'Майкл', 'Макар', 'Макарий', 'Максим', 'Максимильян', 'Максуд', 'Мансур', 'Мануил', 'Мар', 'Марат', 'Мариан', 'Марк', 'Марсель', 'Мартин', 'Матвей', 'Махмуд', 'Мераб', 'Мефодий', 'Мечеслав', 'Микула', 'Милан', 'Мирон', 'Мирослав', 'Митрофан', 'Михаил', 'Мишлов', 'Модест', 'Моисей', 'Мстислав', 'Мурат', 'Муслим', 'Мухаммед', 'Назар', 'Назарий', 'Наиль', 'Натан', 'Наум', 'Нестор', 'Никанор', 'Никита', 'Никифор', 'Никодим', 'Никола', 'Николай', 'Никон', 'Нильс', 'Нисон', 'Нифонт', 'Норманн', 'Овидий', 'Олан', 'Олег', 'Олесь', 'Онисим', 'Орест', 'Орландо', 'Осип', 'Оскар', 'Остап', 'Павел', 'Панкрат', 'Парамон', 'Петр', 'Платон', 'Порфирий', 'Потап', 'Прокофий', 'Прохор', 'Равиль', 'Радий', 'Радик', 'Радомир', 'Радослав', 'Разиль', 'Райан', 'Раймонд', 'Раис', 'Рамазан', 'Рамиз', 'Рамиль', 'Рамон', 'Ранель', 'Расим', 'Расул', 'Ратибор', 'Ратмир', 'Рафаил', 'Рафаэль', 'Рафик', 'Рашид', 'Рем', 'Ринат', 'Рифат', 'Рихард', 'Ричард', 'Роберт', 'Родион', 'Ролан', 'Роман', 'Ростислав', 'Рубен', 'Рудольф', 'Руслан', 'Рустам', 'Руфин', 'Рушан', 'Рэй', 'Сабир', 'Савва', 'Савелий', 'Самвел', 'Самсон', 'Самуил', 'Святослав', 'Севастьян', 'Северин', 'Семен', 'Серафим', 'Сергей', 'Сидор', 'Сократ', 'Соломон', 'Спартак', 'Стакрат', 'Станислав', 'Степан', 'Стефан', 'Стивен', 'Стоян', 'Султан', 'Тагир', 'Таис', 'Тайлер', 'Талик', 'Тамаз', 'Тамерлан', 'Тарас', 'Тельман', 'Теодор', 'Терентий', 'Тибор', 'Тиграм', 'Тигран', 'Тигрий', 'Тимофей', 'Тимур', 'Тит', 'Тихон', 'Томас', 'Трифон', 'Трофим', 'Ульманас', 'Умар', 'Устин', 'Фадей', 'Фазиль', 'Фанис', 'Фарид', 'Фархад', 'Федор', 'Федот', 'Феликс', 'Феодосий', 'Фердинанд', 'Фидель', 'Филимон', 'Филипп', 'Флорентий', 'Фома', 'Франц', 'Фред', 'Фридрих', 'Фуад', 'Хабиб', 'Хаким', 'Харитон', 'Христиан', 'Христос', 'Христофор', 'Цезарь', 'Чарльз', 'Чеслав', 'Чингиз', 'Шамиль', 'Шарль', 'Шерлок', 'Эдвард', 'Эдгар', 'Эдмунд', 'Эдуард', 'Эльдар', 'Эмиль', 'Эмин', 'Эммануил', 'Эраст', 'Эрик', 'Эрнест', 'Юлиан', 'Юлий', 'Юнус', 'Юрий', 'Юхим', 'Яков', 'Ян', 'Януарий', 'Ярослав', 'Ясон']


def random_name():
    return random.choice(surnames) + ' ' + random.choice(firstnames)


def generate_data():
    res = {}
    for i in range(1000):
        guid = str(uuid.uuid4())
        res[guid] = {"value": random_name(), "id": guid}
    return res


data = generate_data()


def filter_data(text):
    return list(islice(filter(lambda x: text in x["value"], data.values()), 50))


@app.route("/search", methods=['GET', 'POST'])
def index():
    try:
        text = json.loads(request.data.decode('utf-8'))["text"]
    except:
        text = ""
    return json.dumps({"values": filter_data(text)})


if __name__ == "__main__":
    app.run(host='0.0.0.0', port=80)
